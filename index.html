<!DOCTYPE HTML>
<html>
	<head>
		<title>Trello API</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<!--[if lte IE 8]><script src="assets/js/ie/html5shiv.js"></script><![endif]-->
		<link rel="stylesheet" href="assets/css/main.css" />
		<!--[if lte IE 9]><link rel="stylesheet" href="assets/css/ie9.css" /><![endif]-->
		<!--[if lte IE 8]><link rel="stylesheet" href="assets/css/ie8.css" /><![endif]-->
		<script src="https://code.jquery.com/jquery-1.7.1.min.js"></script>
		<script src="https://api.trello.com/1/client.js?key=46474dcbdbdff3ea614b65dfb87ba4bf"></script>
		<script type="text/javascript">
			$(document).ready(function() {
				var authenticationSuccess = function() {
				    console.log("Successful authentication");
				    
				    var myList = '5848860065df2e7765bf9900';
					var creationSuccess = function(data) {
					  console.log('Card created successfully. Data returned:' + JSON.stringify(data));
					};
					
					var cardDetails;

					var getSuccess = function(data) {
						console.log('Getting: ' + JSON.stringify(data));
					  	cardDetails = JSON.stringify(data);

					  	console.log("Card details : " + cardDetails);
					};

					// var cardDetails=function(data) {
					// 	console.log("I'm here" +
					// 	JSON.stringify(data));
					// };


					Trello.cards.get('58487efdfdedd23534be018c',getSuccess);
					// var cardDetails = oldCard.responseText;
					console.log(cardDetails);
					// console.log(JSON.stringify(cardDetails));
					// console.log(oldCard["name"]);
					// console.log(oldCard["desc"]);
					
					var newCard = {
						name: cardDetails.name, 
						desc: cardDetails.desc,
						// Place this card at the top of our list 
						idList: myList,
						pos: 'top'
					};
					Trello.post('/cards/', newCard, creationSuccess);
				};

				var authenticationFailure = function() {
				    console.log("Failed authentication");
				};
				$('#update').click(function() {
					Trello.authorize({
						type: 'popup',
						name: 'Getting Started Application',
						scope: {
							read: 'true',
							write: 'true' },
						expiration: 'never',
						success: authenticationSuccess,
						error: authenticationFailure
					});
				});
			});
		</script>
	</head>
	<body>

		<!-- Page Wrapper -->
			<div id="page-wrapper">

					

				<!-- Banner -->
					<section id="banner">
						<div class="inner">
							<div class="logo"><span class="icon fa-bar-chart"></span></div>
							<h2>Trello Web App</h2>
						</div>
						<ul class="actions">
							<li><input id="update" type="submit" value="Update Boards" /></li>
						</ul>
					</section>


				<!-- Wrapper -->
					<section id="wrapper">
						

				<!-- Footer -->
					<section id="footer">
						<div class="inner">
							<h2 class="major">Create a Card</h2>
							<form method="post" action="#">
								<div class="field">
									<label for="name">Name</label>
									<input type="text" name="name" id="name" />
								</div>
								<div class="field">
									<label for="message">Description</label>
									<textarea name="message" id="message" rows="4"></textarea>
								</div>
								<ul class="actions">
									<li><input type="submit" value="Create" /></li>
								</ul>
							</form>
							
					</section>

			</div>

		<!-- Scripts -->
			<script src="assets/js/skel.min.js"></script>
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.scrollex.min.js"></script>
			<script src="assets/js/util.js"></script>
			<!--[if lte IE 8]><script src="assets/js/ie/respond.min.js"></script><![endif]-->
			<script src="assets/js/main.js"></script>
	</body>
</html>